<h1>Tasks - new</h1>
<div id="app">
    <div class="form-group">
        <label for="TopicTitle">タイトル</label>
        <input type="text" class="form-control" id="title" v-model="title">
    </div>
    <div class="form-group">
        <label for="TopicContent">content</label>
        <textarea class="form-control" id="content" rows="3" v-model="content"></textarea>
    </div>
    <button v-on:click="postTask">投稿</button>    
</div>
<!-- -->
<script>
//var baseUrl = '<?php echo($mConfig["base_url"]); ?>/user/index.php';
var baseUrl = '<?php echo($mConfig["base_url"]); ?>/t3.php';
console.log(baseUrl);

var app = new Vue({
    el: '#app',
    created() {
    },    
    data: {
        title:'',
        content:''
    },
    methods: {
        postTask(){
            var url = this.conv_url('/?fn=api_tasks_create')
            var task = {
                'fn' : 'api_tasks_create',
                'title': this.title,
                'content': this.content
            }
//            console.log(task)
//axios.get(baseUrl ,task).then(res => {
            axios.get(url, task ).then(res => {
                console.log(res.data );
                var arr={message : '登録が完了しました。'}
//                exStorage.save( sysConst.STORAGE_KEY_flash, arr )
//                window.location.href='/tasks'
            });            
        },        
        conv_url(url) {
            return baseUrl + url
        }
    }    
});
</script>
